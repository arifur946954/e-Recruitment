<button mat-icon-button [matMenuTriggerFor]="messagesMenu" (click)="openMessagesMenu()">
    <mat-icon style="margin-left: -0.8vh!important;">notifications</mat-icon><span style="color: #ed2856; margin-left: -1.6vh!important; font-size: 10px;">{{notiCount}}</span>    
</button>
<mat-menu #messagesMenu="matMenu" [overlapTrigger]="false" class="toolbar-dropdown-menu messages">
    <!--<span (mouseleave)="onMouseLeave()">-->
        <mat-tab-group (click)="stopClickPropagate($event)" [selectedIndex]="selectedTab">
            <mat-tab>
                <ng-template mat-tab-label>
                    <mat-icon>verified</mat-icon>
                </ng-template>
                <mat-card class="content" perfectScrollbar>
                  <div fxLayout="column" fxLayoutAlign="none">
                      <button mat-button *ngFor="let message of aprvMessages" (click)="getCommentList($event, message);">
                          <img src="{{ ( message.image || (message.name | profilePicture)) }}" width="50">   
                          <div fxLayout="column" fxLayoutAlign="none" class="w-100">
                              <div fxLayout="row" fxLayoutAlign="space-between start">
                                  <span class="name">{{message.name}}</span>
                                  <span class="info"><mat-icon>access_time</mat-icon> {{message.time}}</span>
                              </div>
                              <span class="text secondary-text-color">{{message.text}}</span>
                          </div>
                      </button>
                    </div>             
                </mat-card>
            </mat-tab>
            <mat-tab>
                <ng-template mat-tab-label>
                    <mat-icon>highlight_off</mat-icon>
                </ng-template>
                <mat-card class="content" perfectScrollbar>
                  <div fxLayout="column" fxLayoutAlign="none">
                    <button mat-button *ngFor="let message of dclnMessages" (click)="getCommentList($event, message);">
                        <img src="{{ ( message.image || (message.name | profilePicture)) }}" width="50">   
                        <div fxLayout="column" fxLayoutAlign="none" class="w-100">
                            <div fxLayout="row" fxLayoutAlign="space-between start">
                                <span class="name">{{message.name}}</span>
                                <span class="info"><mat-icon>access_time</mat-icon> {{message.time}}</span>
                            </div>
                            <span class="text secondary-text-color">{{message.text}}</span>
                        </div>
                    </button>
                    </div>             
                </mat-card>
            </mat-tab>
            <!-- <mat-tab>
                <ng-template mat-tab-label>
                    <mat-icon>event</mat-icon>
                </ng-template>
                <mat-card class="content" perfectScrollbar>
                  <div fxLayout="column" fxLayoutAlign="none">
                      <button mat-button *ngFor="let meeting of meetings">  
                          <div fxLayout="column" fxLayoutAlign="center center" class="row-1" [ngClass]="meeting.bgColor">
                              <span class="name">{{meeting.day}}</span>
                              <span class="name">{{meeting.month}}</span>
                          </div>
                          <div fxLayout="column" fxLayoutAlign="none">
                              <span class="name">{{meeting.title}}</span>
                              <span class="text secondary-text-color">{{meeting.text}}</span>
                          </div>
                      </button>
                    </div>             
                </mat-card>
            </mat-tab> -->
        </mat-tab-group>
        <!-- <mat-tab-group (click)="stopClickPropagate($event)" [selectedIndex]="selectedTab">
            <mat-tab>
                <ng-template mat-tab-label>
                    <mat-icon>message</mat-icon>
                </ng-template>
                <mat-card class="content" perfectScrollbar>
                  <div fxLayout="column" fxLayoutAlign="none">
                      <button mat-button *ngFor="let message of messages">
                          <img src="{{ ( message.image || (message.name | profilePicture)) }}" width="50">   
                          <div fxLayout="column" fxLayoutAlign="none" class="w-100">
                              <div fxLayout="row" fxLayoutAlign="space-between start">
                                  <span class="name">{{message.name}}</span>
                                  <span class="info"><mat-icon>access_time</mat-icon> {{message.time}}</span>
                              </div>
                              <span class="text secondary-text-color">{{message.text}}</span>
                          </div>
                      </button>
                    </div>             
                </mat-card>
            </mat-tab>
            <mat-tab>
                <ng-template mat-tab-label>
                    <mat-icon>description</mat-icon>
                </ng-template>
                <mat-card class="content" perfectScrollbar>
                  <div fxLayout="column" fxLayoutAlign="none">
                      <button mat-button *ngFor="let file of files">
                          <div fxLayout="column" fxLayoutAlign="none" class="w-100">
                              <div fxLayout="row" fxLayoutAlign="space-between start">
                                  <span class="name">{{file.text}}</span>
                                  <span class="info">{{file.size}}</span>
                              </div>
                              <mat-progress-bar
                                  class="example-margin"
                                  [color]="file.color"
                                  mode="indeterminate"
                                  [value]="file.value">
                              </mat-progress-bar>
                          </div>
                      </button>
                    </div>             
                </mat-card>
            </mat-tab>
            <mat-tab>
                <ng-template mat-tab-label>
                    <mat-icon>event</mat-icon>
                </ng-template>
                <mat-card class="content" perfectScrollbar>
                  <div fxLayout="column" fxLayoutAlign="none">
                      <button mat-button *ngFor="let meeting of meetings">  
                          <div fxLayout="column" fxLayoutAlign="center center" class="row-1" [ngClass]="meeting.bgColor">
                              <span class="name">{{meeting.day}}</span>
                              <span class="name">{{meeting.month}}</span>
                          </div>
                          <div fxLayout="column" fxLayoutAlign="none">
                              <span class="name">{{meeting.title}}</span>
                              <span class="text secondary-text-color">{{meeting.text}}</span>
                          </div>
                      </button>
                    </div>             
                </mat-card>
            </mat-tab>
        </mat-tab-group> -->
    <!--</span>-->
</mat-menu>

<ng-template #modalApprovalProcessed style="overflow: hidden; margin-top: -20%;">
    <div class="mat-dialog-header border-bottom">
        <h2 class="pull-left" mat-dialog-title class="mb-0">Approval Process</h2>
        <div class="pull-right" style="margin-top: -7%;" fxLayout="row" fxLayoutAlign="start center" fxLayoutGap="12px">
            <button class="pull-right" mat-icon-button matDialogClose tabindex="-1">
                <mat-icon aria-label="Close dialog">close</mat-icon>
            </button>
        </div>
    </div>
    <mat-dialog-content style="overflow: hidden;">
        <fieldset class="mt-4">
            <div class="row">
                <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 col-xs-12 m-0 p-0"
                    style="float: left; margin-top: -24px !important;">
                    <label class="control-label col-sm-4 p-0 m-0" for="aapComments">Comments: </label>
                    <div class="col-sm-6 p-0 m-0">
                        <textarea [(ngModel)]="appModel.comments" type="text" cols="10" rows="5" style="width: 35vh;"
                            class="form-control form-control-sm input-sm input-sm-*" id="aapComments"
                            placeholder="Write text..........." name="aapComments"></textarea>
                    </div>
                </div>
                <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 col-xs-12 m-0 p-0" style="float: left;">
                    <div style="overflow-x:auto; max-height: 500px; height: auto;">
                        <table id="table" class="table table-striped table-sm table-bordered p-0">
                            <thead style="position:sticky; top:-1.5px; z-index:1; cursor: pointer; text-align: left;">
                                <tr class="gradiantBackground banglaTitle myCustomTableHeaderText">
                                    <th
                                        style="position:sticky; top:-1.5px; z-index:1; cursor: pointer; text-align: left; width: 30%;">
                                        Commenter</th>
                                    <th
                                        style="position:sticky; top:-1.5px; z-index:1; cursor: pointer; text-align: center; width: 70%;">
                                        Comments</th>
                                    <th
                                        style="position:sticky; top:-1.5px; z-index:1; cursor: pointer; text-align: center; width: 70%;">
                                        Status</th>
                                </tr>
                            </thead>
                            <tbody class="banglaTitle p-0" style="padding-bottom: 0px; margin-bottom: 0px;">
                                <tr *ngFor="let item of appModel.commentList;let sl = index">
                                    <td class="pl-2 pr-1 pt-1 pb-1 height-sm" style="width: 30%;"
                                        [style.background]="item.userId==appModel.fromUserId?'red':''"
                                        [style.color]="item.userId==appModel.fromUserId?'white':''"
                                        *ngIf="appModel.miSequence==item.sequences || item.comment!=null">
                                        {{item.commenterName}}</td>
                                    <td class="pl-2 pr-1 pt-1 pb-1 height-sm" style="width: 70%;"
                                        [style.background]="item.userId==appModel.fromUserId?'red':''"
                                        [style.color]="item.userId==appModel.fromUserId?'white':''"
                                        *ngIf="appModel.miSequence==item.sequences || item.comment!=null">
                                        {{item.comment}}</td>
                                    <td class="pl-2 pr-1 pt-1 pb-1 height-sm" style="width: 70%;"
                                        [style.background]="item.userId==appModel.fromUserId?'red':''"
                                        [style.color]="item.userId==appModel.fromUserId?'white':''"
                                        *ngIf="appModel.miSequence==item.sequences || item.comment!=null">
                                        {{item.isApproved=='1' &&
                                        item.isDeclined=='0'?'Approved':item.isApproved=='0' &&
                                        item.isDeclined=='1'?'Declined':'--'}}</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </fieldset>
    </mat-dialog-content>
    <mat-dialog-actions class="border-top mt-4" style="overflow:hidden;" align="end">
        <button type="button" mat-button matDialogClose>Cancel</button>
        <button type="submit" mat-raised-button matDialogClose color="primary" style="background: green; color:white;"
            (click)="submitForward(appModel)">{{appModel.forward}}</button>
        <button type="submit" mat-raised-button matDialogClose color="danger" style="background: red; color:white;"
            *ngIf="appModel.currentSequence>appModel.minSequence"
            (click)="submitBackward(appModel)">{{appModel.backward}}</button>
    </mat-dialog-actions>
</ng-template>