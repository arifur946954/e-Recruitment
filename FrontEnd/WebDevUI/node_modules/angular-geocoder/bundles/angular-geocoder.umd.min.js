!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common/http"),require("@angular/common"),require("@angular/forms"),require("rxjs/operators"),require("terraformer-wkt-parser")):"function"==typeof define&&define.amd?define("angular-geocoder",["exports","@angular/core","@angular/common/http","@angular/common","@angular/forms","rxjs/operators","terraformer-wkt-parser"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self)["angular-geocoder"]={},e.ng.core,e.ng.common.http,e.ng.common,e.ng.forms,e.rxjs.operators,e.terraformerWktParser)}(this,(function(e,t,o,r,n,s,i){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */Object.create;function a(e,t){var o="function"==typeof Symbol&&e[Symbol.iterator];if(!o)return e;var r,n,s=o.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=s.next()).done;)i.push(r.value)}catch(e){n={error:e}}finally{try{r&&!r.done&&(o=s.return)&&o.call(s)}finally{if(n)throw n.error}}return i}Object.create;var l=function(){function e(e){this.http=e,this.geocoderBaseUrl="https://geodata.nationaalgeoregister.nl/locatieserver/v3"}return e.prototype.suggest=function(e,t){var o=this,r={q:e,fq:"*",start:0,rows:10};return t&&(r=Object.assign(r,t)),this.http.get(this.geocoderBaseUrl+"/suggest?",{params:r}).toPromise().then((function(e){return{collations:o.formatCollations(e.spellcheck.collations),places:o.formatPlaces(e)}}))},e.prototype.suggest$=function(e,t){var o=this,r={q:e,fq:"*",start:0};return t&&(r=Object.assign(r,t)),this.http.get(this.geocoderBaseUrl+"/suggest?",{params:r}).pipe(s.map((function(e){return{collations:o.formatCollations(e.spellcheck.collations),places:o.formatPlaces(e)}})))},e.prototype.lookup=function(e,t){var o=this,r={id:e,fl:"*"};return t&&(r=Object.assign(r,t)),this.http.get(this.geocoderBaseUrl+"/lookup?",{params:r}).toPromise().then((function(e){return o.formatLookupResponse(e)}))},e.prototype.lookup$=function(e,t){var o=this,r={id:e,fl:"*"};return t&&(r=Object.assign(r,t)),this.http.get(this.geocoderBaseUrl+"/lookup?",{params:r}).pipe(s.map((function(e){return o.formatLookupResponse(e)})))},e.prototype.free=function(e,t){var o=this,r={q:e,fl:"*",fq:"*",rows:10,start:0};return t&&(r=Object.assign(r,t)),this.http.get(this.geocoderBaseUrl+"/free?",{params:r}).toPromise().then((function(e){return o.formatReverseResponse(e)}))},e.prototype.free$=function(e,t){var o=this,r={q:e,fl:"*",fq:"*",rows:10,start:0};return t&&(r=Object.assign(r,t)),this.http.get(this.geocoderBaseUrl+"/free?",{params:r}).pipe(s.map((function(e){return o.formatReverseResponse(e)})))},e.prototype.reverse=function(e,t){var o=this,r={type:"adres",fq:"*",fl:"*",rows:10,distance:200};t&&(r=Object.assign(r,t,e));return this.http.get("https://geodata.nationaalgeoregister.nl/locatieserver/revgeo?",{params:r}).toPromise().then((function(e){return o.formatReverseResponse(e)}))},e.prototype.reverse$=function(e,t){var o=this,r={type:"adres",fq:"*",fl:"*",rows:10,distance:200};t&&(r=Object.assign(r,t,e));return this.http.get("https://geodata.nationaalgeoregister.nl/locatieserver/revgeo?",{params:r}).pipe(s.map((function(e){return o.formatReverseResponse(e)})))},e.prototype.formatCollations=function(e){for(var t=[],o=0;o<e.length;o+=2){var r={id:o,naam:e[o+1].misspellingsAndCorrections[1],weergavenaam:e[o+1].hits+" resultaten gevonden voor <strong> "+e[o+1].misspellingsAndCorrections[1]+" </strong>",hits:e[o+1].hits};t.push(r)}return t},e.prototype.formatPlaces=function(e){return e.response.docs.map((function(t){return Object.assign(Object.assign({},t),{highlight:e.highlighting[t.id].suggest[0]})}))},e.prototype.formatLookupResponse=function(e){return e.response.docs.map((function(e){var t=e;return e.centroide_ll&&(t.centroide_ll=i.parse(e.centroide_ll)),e.centroide_rd&&(t.centroide_rd=i.parse(e.centroide_rd)),e.geometrie_rd&&(t.geometrie_rd=i.parse(e.geometrie_rd)),e.geometrie_ll&&(t.geometrie_ll=i.parse(e.geometrie_ll)),t}))[0]||{}},e.prototype.formatReverseResponse=function(e){return e.response.docs.map((function(e){var t=e;return e.centroide_ll&&(t.centroide_ll=i.parse(e.centroide_ll)),e.centroide_rd&&(t.centroide_rd=i.parse(e.centroide_rd)),e.geometrie_rd&&(t.geometrie_rd=i.parse(e.geometrie_rd)),e.geometrie_ll&&(t.geometrie_ll=i.parse(e.geometrie_ll)),t.highlight=e.weergavenaam,t}))},e}();l.decorators=[{type:t.Injectable}],l.ctorParameters=function(){return[{type:o.HttpClient}]};var c=function(){function e(e){this.geocoderService=e,this.resultCountLimit=10,this.resultFieldsToShow=[],this.placeFound=new t.EventEmitter,this.formattedPlaceholder="",this.resultsVisible=!0,this.places=[],this.collations=[],this.searchThreshold=2,this.foundPlace=null,this.selectedItem=[],this.selectedIndex=-1,this.subscriptions=[],this.searchField=new n.FormControl,this.searchForm=new n.FormGroup({search:this.searchField}),this.subscriptions.push(this.subscribeToSearchFieldValueChanges())}return e.prototype.clickout=function(e){this.geocoderRef.nativeElement.contains(e.target)?this.showResults():this.hideResults()},e.prototype.ngOnInit=function(){this.formattedPlaceholder=this.formatPlaceholder(this.placeholder)},e.prototype.ngOnChanges=function(e){e.searchInput&&this.searchField.setValue(e.searchInput.currentValue)},e.prototype.ngOnDestroy=function(){this.subscriptions.forEach((function(e){return e.unsubscribe()}))},e.prototype.subscribeToSearchFieldValueChanges=function(){var e=this;return this.searchField.valueChanges.pipe(s.filter((function(t){return t.length>e.searchThreshold})),s.debounceTime(100),s.distinctUntilChanged(),s.switchMap((function(t){return e.suggest(t)}))).subscribe((function(t){e.places=t.places,e.collations=t.collations}))},e.prototype.suggest=function(e){var t={fq:"*:*",fl:function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(a(arguments[t]));return e}(["id","score","type","weergavenaam"],this.resultFieldsToShow).toString(),rows:this.resultCountLimit};if(this.type){var o=new RegExp(",","g"),r=this.type.replace(o," OR ");t.fq="type:("+r+")",this.province&&(t.fq+=" AND provincienaam:("+this.province+")")}else this.province&&(t.fq="provincienaam:("+this.province+")");return this.geocoderService.suggest$(e,t)},e.prototype.free=function(){var e=this,t=this.searchField.value,o={fq:"*:*"};if(this.type){var r=new RegExp(",","g"),n=this.type.replace(r," OR ");o.fq="type:("+n+")",this.province&&(o.fq+=" AND provincienaam:("+this.province+")")}else this.province&&(o.fq="provincienaam:("+this.province+")");return this.geocoderService.free$(t,o).subscribe((function(t){e.places=t}))},e.prototype.lookup=function(e){var t=this;this.geocoderService.lookup$(e).subscribe((function(e){if(t.foundPlace=e,t.resultFieldsToShow.length>0){var o=t.resultFieldsToShow.map((function(e){return t.foundPlace[e]})).join(", ");t.fillInput(o)}else t.fillInput(t.foundPlace.weergavenaam);t.placeFound.emit(t.foundPlace),t.clearPlaces()}))},e.prototype.clear=function(){this.foundPlace=null,this.searchField.setValue(""),this.clearPlaces()},e.prototype.clearPlaces=function(){this.resetIndex(),this.places=[],this.collations=[]},e.prototype.handleEnter=function(){if(-1!==this.selectedIndex){var e=this.places[this.selectedIndex];this.lookup(e.id)}},e.prototype.isNoResultsFound=function(){var e=(this.searchField.value&&this.searchField.value.length)>this.searchThreshold,t=0===this.places.length,o=null==this.foundPlace;return e&&t&&o},e.prototype.showCollations=function(){return this.collations.length>0&&0===this.places.length},e.prototype.fillInput=function(e,t){void 0===t&&(t=!1),this.searchField.setValue(e,{emitEvent:t})},e.prototype.isHighlighted=function(e){if(e===this.selectedIndex)return!0},e.prototype.moveUp=function(){this.selectedIndex>0&&this.selectedIndex--},e.prototype.moveDown=function(){this.selectedIndex<this.places.length&&this.selectedIndex++},e.prototype.resetIndex=function(){this.selectedIndex=-1},e.prototype.canQuery=function(){var e=this.searchField.value;return e&&e.length>this.searchThreshold},e.prototype.canClear=function(){var e=this.searchField.value;return e&&e.length>0},e.prototype.formatPlaceholder=function(e){var t="Zoeken op de kaart...";return e&&(t=e),t},e.prototype.onCollationClick=function(e){this.fillInput(e,!0)},e.prototype.showResults=function(){this.resultsVisible=!0},e.prototype.hideResults=function(){this.resultsVisible=!1},e}();c.decorators=[{type:t.Component,args:[{template:'<div #geocoder (keydown.ArrowUp)="moveUp()" (keydown.ArrowDown)="moveDown()" (keydown.Enter)="handleEnter()"\r\n  class="geocoder-container">\r\n  \x3c!-- Input --\x3e\r\n  <div class="geocoder-search-container">\r\n    <form [formGroup]="searchForm">\r\n      <input (focus)="showResults()" formControlName="search" class="geocoder-search-input" [placeholder]="formattedPlaceholder" type="text"\r\n        aria-label="Zoeken" maxlength="100">\r\n    </form>\r\n    <button class="searchButton" aria-label="zoeken" (click)="free()" [ngClass]="{\'highlight\': canQuery()}"> <svg\r\n        aria-hidden="true" data-fa-processed="" data-prefix="fal" data-icon="search" role="img"\r\n        xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="svg-inline--fa fa-search fa-w-16 fa-9x">\r\n        <path fill="currentColor"\r\n          d="M508.5 481.6l-129-129c-2.3-2.3-5.3-3.5-8.5-3.5h-10.3C395 312 416 262.5 416 208 416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c54.5 0 104-21 141.1-55.2V371c0 3.2 1.3 6.2 3.5 8.5l129 129c4.7 4.7 12.3 4.7 17 0l9.9-9.9c4.7-4.7 4.7-12.3 0-17zM208 384c-97.3 0-176-78.7-176-176S110.7 32 208 32s176 78.7 176 176-78.7 176-176 176z"\r\n          class=""></path>\r\n      </svg></button>\r\n    <button class="closeButton" aria-label="zoekopdracht verwijderen" (click)="clear()"\r\n      [ngClass]="{\'highlight\': canClear()}"> <svg aria-hidden="true" data-fa-processed="" data-prefix="fal"\r\n        data-icon="times" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"\r\n        class="svg-inline--fa fa-times fa-w-12 fa-7x">\r\n        <path fill="currentColor"\r\n          d="M217.5 256l137.2-137.2c4.7-4.7 4.7-12.3 0-17l-8.5-8.5c-4.7-4.7-12.3-4.7-17 0L192 230.5 54.8 93.4c-4.7-4.7-12.3-4.7-17 0l-8.5 8.5c-4.7 4.7-4.7 12.3 0 17L166.5 256 29.4 393.2c-4.7 4.7-4.7 12.3 0 17l8.5 8.5c4.7 4.7 12.3 4.7 17 0L192 281.5l137.2 137.2c4.7 4.7 12.3 4.7 17 0l8.5-8.5c4.7-4.7 4.7-12.3 0-17L217.5 256z"\r\n          class=""></path>\r\n      </svg></button>\r\n  </div>\r\n  \x3c!-- Search results--\x3e\r\n  <div class="geocoder-suggestions-container" *ngIf="resultsVisible === true">\r\n    <div class="geocoder-suggestions-results" *ngIf="places.length > 0">\r\n      <ul class="geocoder-suggestions-list">\r\n        <li class="geocoder-suggestion" tabindex={{i}} *ngFor="let place of places; let i = index;"\r\n          (click)="lookup(place.id)" [ngClass]="{\'focus-background\': isHighlighted(i)}">\r\n          <p *ngIf="resultFieldsToShow.length === 0" class="geocoder-suggestion-title" [innerHTML]="place.highlight">\r\n          </p>\r\n          <p *ngIf="resultFieldsToShow.length > 0" class="geocoder-suggestion-title">\r\n            <ng-container *ngFor="let field of resultFieldsToShow">\r\n              {{place[field]}}\r\n            </ng-container>\r\n          </p>\r\n          <p class="geocoder-suggestion-type"> {{place.type}} </p>\r\n        </li>\r\n      </ul>\r\n    </div>\r\n    <div class="geocoder-no-results" *ngIf="isNoResultsFound()">\r\n      <p>Geen zoekresultaten gevonden voor <strong> {{searchField.value}}</strong>.</p>\r\n    </div>\r\n    <div class="geocoder-collation-container" *ngIf="showCollations()">\r\n      <ul class="geocoder-collations-list">\r\n        <li class="geocoder-collation" tabindex={{i}} (click)="onCollationClick(collation.naam)"\r\n          *ngFor="let collation of collations; let i = index;" [innerHTML]="collation.weergavenaam">\r\n        </li>\r\n      </ul>\r\n    </div>\r\n  </div>\r\n</div>\r\n',selector:"geocoder",styles:["::-webkit-input-placeholder{color:#797979;font-size:14px}:-moz-placeholder,::-moz-placeholder{color:#797979;font-size:14px}:-ms-input-placeholder{color:#797979;font-size:14px}::-ms-input-placeholder{color:#797979;font-size:14px}:-moz-placeholder-shown{color:#797979;font-size:14px}:placeholder-shown{color:#797979;font-size:14px}:focus{outline:0}input,li,p,span{color:#797979;font-size:14px;margin:0}.geocoder-container{max-width:100%;position:relative;width:100%}.geocoder-search-container{background:#fff;border:none;box-shadow:0 3px 6px rgba(0,0,0,.16),0 3px 6px rgba(0,0,0,.23);width:100%}.geocoder-search-input{border:none;max-width:100%;overflow:hidden;padding:15px;width:95%;width:calc(100% - 80px)}button{cursor:pointer;position:absolute}.searchButton{background:#fff;border:none;border-right:1px solid #797979;padding-right:15px;right:50px;top:13px}.closeButton{background:#fff;border:none;margin-left:16px;right:10px;top:10px}svg{color:#797979;width:18px}.closeButton:hover svg,.highlight svg,.searchButton:hover svg{color:#79abff;transition:all .1s cubic-bezier(.075,.82,.165,1)}.geocoder-suggestions-results{background:#fff;box-shadow:0 3px 6px rgba(0,0,0,.16),0 3px 6px rgba(0,0,0,.23);max-height:400px;overflow-y:auto;position:absolute;top:53px;width:100%;z-index:1}.geocoder-collations-list,.geocoder-suggestions-list{list-style-type:none;margin:0;padding:0}.geocoder-suggestion{border-bottom:1px solid #f1f1f1;padding:15px;position:relative}.geocoder-suggestion-title{max-width:243px}.geocoder-suggestion-type{color:#bfbfbf;font-size:11px;font-weight:700;position:absolute;right:15px;text-transform:uppercase;top:36%}.geocoder-collation:hover,.geocoder-suggestion:hover{background-color:#f7f7f7;cursor:pointer}.focus-background{background-color:#f7f7f7}.geocoder-no-results{background:#fff;box-shadow:0 3px 6px rgba(0,0,0,.16),0 3px 6px rgba(0,0,0,.23);box-sizing:border-box;padding:15px;position:absolute;top:53px;width:100%;z-index:1}.geocoder-collation{z-index:1}.geocoder-collation-container{background:#fff;box-shadow:0 3px 6px rgba(0,0,0,.16),0 3px 6px rgba(0,0,0,.23);position:absolute;top:108px;width:100%;z-index:1}.geocoder-collation-container li{border-bottom:1px solid #f1f1f1;padding:15px}.searchButton{height:20px}.closeButton{height:26px}"]}]}],c.ctorParameters=function(){return[{type:l}]},c.propDecorators={geocoderRef:[{type:t.ViewChild,args:["geocoder",{static:!1}]}],type:[{type:t.Input}],searchInput:[{type:t.Input}],placeholder:[{type:t.Input}],resultCountLimit:[{type:t.Input}],resultFieldsToShow:[{type:t.Input}],province:[{type:t.Input}],placeFound:[{type:t.Output}],clickout:[{type:t.HostListener,args:["document:click",["$event"]]}]};var p=function(){};p.decorators=[{type:t.NgModule,args:[{imports:[o.HttpClientModule,r.CommonModule,n.ReactiveFormsModule],exports:[c],declarations:[c],providers:[l]}]}],e.GeocoderModule=p,e.GeocoderService=l,e.ɵa=c,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=angular-geocoder.umd.min.js.map